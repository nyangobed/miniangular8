<div [@routerTransition]>
    <div class="page page-dashboard">
        <app-page-header [heading]="'Estates'" [icon]="'fa-edit'"></app-page-header>
        <!--        <section class="tile">
                    <div class="tile-body">
                        <div class="row">
                            <div class="col-lg-12">
                                <mat-form-field class="col-lg-3 col-md-3 pull-right">
                                    <mat-select placeholder="Select Products" [(ngModel)]="productId" name="product" (change)="updateContent()">
                                        <mat-option *ngFor="let product of products" [value]="product.productId">{{ product.productName }}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <hr/>
                        <h4>Business Units</h4>
                        <hr/>
                        <hr class="row" *ngIf="isSelected"/>
                        <div class="row" *ngIf="isEstatePresent">
                            <div class="col-lg-8">
                                <tree-root #tree [nodes]="nodes" [options]="options" (event)="onEvent($event)">
                                    <ng-template #treeNodeTemplate let-node let-index="index">
                                        <img src="assets/images/folder.png"/>
                                        <span>{{ node.data.name }}</span>
                                    </ng-template>
                                </tree-root>
                            </div>
                            <div class="col-lg-4 pad-top-xxl">
                                <div class="col-lg-6 pull-left">
                                    <a routerLink="/estate/createbusinessunititem"><button class="btn btn-sm btn-success text-white col-lg-12 mb-3">Add Estate</button></a>
                                    <button *ngIf="isSelected" class="btn btn-sm btn-primary text-white col-lg-12 mb-3" (click)="openEdit()">{{editLabel}}</button>
                                    <button *ngIf="isSelected" class="btn btn-sm btn-primary text-white col-lg-12 mb-3" (click)="open(viewcontent, 'View')">View Estate</button>
                                    <button *ngIf="canActivate" class="btn btn-sm btn-warning text-white  col-lg-12 mb-3" (click)="open(content, declineLabel)">{{declineLabel}}</button>
                                    <button *ngIf="canActivate" class="btn btn-sm btn-info text-white col-lg-12 mb-3" (click)="open(content, approveLabel)">{{approveLabel}}</button>   
                                </div>
                                <ng-template #content let-c="close" let-d="dismiss">
                                    <form (ngSubmit)="approve(checkerForm)" #checkerForm="ngForm"  role="form">
                                        <div class="modal-header">
                                            <h4 class="modal-title">{{checkerActions.action}} Actions</h4>
                                            <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                                                    <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <fieldset class="form-group">
                                                <label>Notes</label>
                                                <textarea name="notes" class="form-control" maxlength="500" required="" rows="3" [(ngModel)]="checkerActions.notes"></textarea>
                                            </fieldset>
        
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" (click)="c('Close click')">Close</button>
                                            <button type="submit" [disabled]="!checkerForm.form.valid" class="btn btn-success">{{checkerActions.action}}</button>
                                        </div>
                                    </form>
                                </ng-template>
        
                                <ng-template #viewcontent let-c="close" let-d="dismiss">
                                    <div class="modal-header">
                                        <h4 class="modal-title">{{selectedValue.name}}</h4>
                                        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                                                <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row" *ngIf="isSelected">
                                            <div class="col-lg-12" *ngIf="isEstatePresent">
                                                <div class="row">                    
                                                    <div class="col-lg-12">
        
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <app-viewentity [viewparam]="viewparam" [title]="'Unit Details'" [subtitle]="selectedValue.name"></app-viewentity>
                                                    </div>
                                                </div>
                                            </div> 
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" (click)="c('Close click')">Close</button>
                                    </div>
                                </ng-template>
                            </div>
                        </div>   
                        <div class="row" *ngIf="!isEstatePresent">
                            <div  class='col-lg-12'>
        
                                <mat-card-subtitle>Business Units not found</mat-card-subtitle>
                                <mat-divider></mat-divider>
                                <td-message label="Info" sublabel="You haven't Created any Business Units yet for the selected product" color="accent" icon="info"></td-message>  
        
                            </div>
                        </div>
                    </div>
                </section>-->
        <div class="row">
            <div class="col-md-8">
                <section class="tile">
                    <div class="tile-header dvd dvd-btm">
                        <h1 class="custom-font"><strong>Estates</strong> Tree</h1>                
                    </div>
                    <div class="tile-body">
<!--                        <div class="row">
                            <div class="col-lg-12">
                                <mat-form-field class="col-lg-6 col-md-6 pull-right">
                                    <mat-select placeholder="Select Business Unit" [(ngModel)]="productId" name="product" (change)="updateContent()">
                                        <mat-option *ngFor="let product of products" [value]="product.productId">{{ product.productName }}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>-->
                        <div class="row">
                            <div id="take1" class="demo"></div>
                        </div>
                        <div class="row" *ngIf="!isEstatePresent">
                            <div  class='col-lg-12'>        
                                <mat-card-subtitle>Estates not found</mat-card-subtitle>
                                <mat-divider></mat-divider>
                                <td-message label="Info" sublabel="You haven't Created any Estates yet" color="accent" icon="info"></td-message> 
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            <div class="col-md-4">
                <section class="tile">
                    <div class="tile-header dvd dvd-btm">
                        <h1 class="custom-font"><strong>Actions</strong> Buttons</h1>                
                    </div>
                    <div class="tile-body">
                        <div class="row">                            
                            <a routerLink="/estate/createbusinessunititem"><button class="btn btn-sm btn-success text-white col-md-6 m-10"><i class='fa fa-plus mr-20 pull-left'></i>Add Estate</button></a>
                        </div>
                        <div class="row">
                            <button *ngIf="isSelected" class="btn btn-sm btn-primary text-white col-md-6 m-10" (click)="openEdit()"><i class='fa fa-edit mr-20 pull-left'></i>{{editLabel}}</button>
                        </div>
                        <div class="row">
                            <button *ngIf="isSelected" class="btn btn-sm btn-primary text-white col-md-6 m-10" (click)="viewUnits()"><i class='fa fa-eye mr-20  pull-left'></i>View Estate</button>
                        </div>
                        <div class="row">
                            <button *ngIf="canActivate" class="btn btn-sm btn-danger text-white col-md-6 m-10" (click)="open(content, 'Decline')"><i class='fa fa-thumbs-down mr-20  pull-left'></i>{{declineLabel}}</button>
                        </div>
                        <div class="row">
                            <button *ngIf="canActivate" class="btn btn-sm btn-info text-white col-md-6 m-10" (click)="open(content, 'Approve')"><i class='fa fa-thumbs-up mr-20  pull-left'></i>{{approveLabel}}</button> 
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>
